# NRC7292 드라이버 아키텍처 개요

## 전체 구조

```
Linux 커널 공간
├── mac80211 서브시스템
│   └── nrc-mac80211.c/.h     # mac80211 인터페이스 레이어
├── 네트워크 스택
│   └── cfg80211              # 무선 설정 프레임워크
└── 하드웨어 추상화
    ├── nrc-hif-cspi.c/.h     # CSPI 하드웨어 인터페이스
    ├── nrc-trx.c             # TX/RX 패킷 처리
    └── wim.c/.h              # WIM 프로토콜 구현

사용자 공간
├── CLI 애플리케이션
│   └── cli_app/              # 설정 및 관리 도구
└── 설정 스크립트
    └── start.py/stop.py      # 네트워크 모드 제어
```

## 주요 구성 요소

### 1. MAC 레이어 (nrc-mac80211.c)
- Linux mac80211과의 인터페이스
- 가상 인터페이스 관리 (최대 2개)
- 스테이션/AP/메시 모드 지원

### 2. 하드웨어 인터페이스 (HIF)
- CSPI (Custom SPI) 프로토콜
- 인터럽트 및 폴링 모드 지원
- 펌웨어와의 통신 담당

### 3. WIM 프로토콜
- 명령/응답 기반 통신
- 펌웨어 제어 및 설정
- 상태 관리 및 동기화

### 4. 전력 관리
- 다양한 절전 모드
- 동적 전력 스케일링
- 딥슬립 지원

## 데이터 흐름

1. **송신**: 사용자 데이터 → mac80211 → nrc-trx → HIF → 펌웨어
2. **수신**: 펌웨어 → HIF → nrc-trx → mac80211 → 네트워크 스택